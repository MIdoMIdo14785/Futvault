<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FUTVault — Catalogue</title>
  <meta name="description" content="Catalogue FutVault — comptes, abonnements et jeux.">
  <style>
    :root{
      --bg:#06151a; --card:#0e2a33; --muted:#9fb3bd; --accent:#bfe1ff; --accent-2:#dff6ea; --radius:14px;
      --pill-padding:12px 22px; --gap:16px; --card-padding:22px;
      font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#031219 0%, #071922 100%);color:#d6eef6}
    .wrap{max-width:1100px;margin:28px auto;padding:18px}

    /* Header */
    header{display:flex;align-items:center;gap:18px;margin-bottom:18px}
    .logo{display:flex;align-items:center;gap:12px}
    .logo img{height:38px;width:auto;border-radius:10px;object-fit:cover}
    .site-title{font-weight:800;font-size:20px;letter-spacing:0.4px}

    /* grid */
    .grid{display:grid;grid-template-columns:repeat(1,1fr);gap:18px}
    @media(min-width:760px){.grid{grid-template-columns:repeat(2,1fr)}}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));padding:var(--card-padding);border-radius:18px;box-shadow:0 6px 18px rgba(2,10,14,0.6)}

    .hero-img{width:100%;height:260px;border-radius:12px;object-fit:cover;display:block}
    .product-title{margin-top:12px;font-weight:700}

    /* platform price layout: side-by-side like FC26 */
    .platforms{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap}
    .platform{flex:1 1 48%;min-width:160px;background:rgba(0,0,0,0.18);padding:18px;border-radius:12px;display:flex;flex-direction:column;align-items:center;gap:8px}
    .platform .label{font-size:13px;color:var(--muted)}
    .price-pill{background:var(--accent);color:#042233;font-weight:800;padding:12px 22px;border-radius:16px;font-size:20px;box-shadow:0 6px 14px rgba(11,36,50,0.25)}
    .price-pill.secondary{background:var(--accent-2);color:#053233;font-weight:800}
    .small-muted{font-size:13px;color:var(--muted);margin-top:6px}

    /* PS+ toggle buttons centered */
    .toggles{display:flex;gap:10px;margin-top:6px;justify-content:center}
    .toggle-btn{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:12px;cursor:pointer;color:var(--muted);transition:all .18s ease}
    .toggle-btn:hover{transform:translateY(-2px)}
    .toggle-btn.active{background:linear-gradient(180deg,#bfe1ff,#98d8ff);color:#042233;border-color:rgba(0,0,0,0.08);box-shadow:0 8px 28px rgba(11,36,50,0.28);filter:drop-shadow(0 6px 18px rgba(0,150,255,0.08))}

    /* small footer */
    footer{margin-top:18px;color:var(--muted);font-size:13px}

    /* loader avoidance - simple error box */
    .error{background:#220a0a;padding:12px;border-radius:10px;color:#ffdede}

    /* general utilities */
    .hidden{display:none}
    a{color:inherit}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <!-- Use .webp images for smoother site (you asked) -->
        <img src="images/futvault-logo.webp" alt="FutVault logo" id="site-logo">
        <div>
          <div class="site-title">FUTVault</div>
        </div>
      </div>
    </header>

    <main id="main-content">
      <!-- Subscription block with centered 6/12 buttons and working toggles -->
      <section class="card" id="psplus-essential">
        <h3>PS+ Essential</h3>
        <div class="toggles" data-target="psplus-essential-prices">
          <button class="toggle-btn active" data-duration="6">6 mois</button>
          <button class="toggle-btn" data-duration="12">12 mois</button>
        </div>

        <div id="psplus-essential-prices" style="margin-top:14px">
          <div class="platforms">
            <div class="platform">
              <div class="label">PS5</div>
              <div class="price-pill" data-price-6="500" data-price-12="900">500 DHS</div>
              <div class="small-muted">Principal</div>
              <div class="secondary-wrap"><div class="price-pill secondary" data-price-6="100" data-price-12="180">100 DHS</div>
                <div class="small-muted">Secondaire</div>
              </div>
            </div>

            <div class="platform">
              <div class="label">PS4</div>
              <div class="price-pill" data-price-6="250" data-price-12="480">250 DHS</div>
              <div class="small-muted">Principal</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Catalogue grid populated from inline JSON (webp images) -->
      <section style="margin-top:18px">
        <h3 style="margin-bottom:8px">Catalogue</h3>
        <div id="catalog" class="grid"></div>
      </section>

      <div id="error-box" class="hidden"></div>
    </main>

    <footer>
      © FutVault — Assure-toi d'uploader les images en .webp dans /images pour un rendu smooth.
    </footer>
  </div>

  <script>
    // ---------- Inline JSON (webp image names) ----------
    const products = [
      {"id":"fc26","title":"EA SPORTS FC 26","image":"images/fc26.webp","platforms":[{"name":"PS5","principal":"250","secondaire":"200"},{"name":"PS4","principal":"200"}]},
      {"id":"rdr2","title":"Red Dead Redemption II","image":"images/rdr2.webp","platforms":[{"name":"PS5","principal":"240","secondaire":"180"},{"name":"PS4","principal":"210"}]},
      {"id":"ac","title":"Assassin's Creed Valhalla","image":"images/acv.webp","platforms":[{"name":"PS5","principal":"220","secondaire":"170"},{"name":"PS4","principal":"190"}]},
      {"id":"bf","title":"Battlefield (série)","image":"images/bf.webp","platforms":[{"name":"PS5","principal":"230","secondaire":"180"},{"name":"PS4","principal":"195"}]},
      {"id":"cod","title":"Call of Duty (dernier)","image":"images/cod.webp","platforms":[{"name":"PS5","principal":"260","secondaire":"210"},{"name":"PS4","principal":"210"}]}
    ];

    // ---------- Render catalogue (safe, no endless fetch) ----------
    const catalog = document.getElementById('catalog');
    function renderCatalog(){
      catalog.innerHTML = '';
      products.forEach(p=>{
        const el = document.createElement('article'); el.className='card';
        el.innerHTML = `
          <img class="hero-img" src="${p.image}" alt="${p.title}">
          <div class="product-title">${p.title}</div>
          <div class="platforms">${p.platforms.map(pl=>`
            <div class="platform">
              <div class="label">${pl.name}</div>
              <div class="price-pill">${pl.principal} DHS</div>
              <div class="small-muted">Principal</div>
              ${pl.secondaire ? `<div class="secondary-wrap"><div class="price-pill secondary">${pl.secondaire} DHS</div><div class="small-muted">Secondaire</div></div>` : ''}
            </div>
          `).join('')}</div>
        `;
        catalog.appendChild(el);
      })
    }

    // initial render
    try{ renderCatalog(); }
    catch(e){
      const box = document.getElementById('error-box'); box.className='error'; box.textContent='Erreur d\'affichage: '+e.message;
    }

    // ---------- Toggles behaviour for subscriptions ----------
    document.querySelectorAll('.toggles').forEach(group=>{
      const targetId = group.dataset.target;
      group.addEventListener('click', e=>{
        const btn = e.target.closest('.toggle-btn'); if(!btn) return;
        group.querySelectorAll('.toggle-btn').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const duration = btn.dataset.duration; // '6' or '12'
        const container = document.getElementById(targetId);
        if(container){
          container.querySelectorAll('[data-price-6]').forEach(el=>{
            const val = el.dataset['price'+duration];
            if(val) el.textContent = val + ' DHS';
          });
        }
      });
    });

    // 1) Logo tweak if too large
    const logo = document.getElementById('site-logo');
    if(logo){ logo.style.height='36px'; logo.style.opacity='0.98'; }

    console.info('FutVault: HTML updated (uses .webp). Replace inline products with your JSON raw if needed.');
  </script>
</body>
</html>
